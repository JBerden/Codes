#include <stdio.h>
#include "pqSorted.h"

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

void clear( PQ *pq )
{
  pq->count = 0;
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

bool isEmpty( PQ *pq )
{
  if ( pq->count == 0 )
  {
    return true;
  }
  else
  {
    return false;
  }
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

void put( PQ *pq , ITEM item )

{
  int i = -1; 
  int j = pq->count;

  int p = item.prio;

  // invariant 1: -1 <= i < j <= count_
  // invariant 2: items_[i].prio >= p > items_[j].prio

  while ( i+1 != j ) 
  {
    int m = (i + j) / 2; // rounded down, 0<=i<m<j<=count_

    if ( pq->items[m].prio >= p ) 
    {
      i = m;
    } 
    else 
    { // p > items_[m].prio
      j = m;
    }
  }

  // move all items

  int iInsert = i+1;

  for ( i = pq->count ; i > iInsert ; i-- )
  {
    pq->items[i] = pq->items[i-1];
  }

  pq->items[iInsert] = item;

  pq->count++;
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

ITEM getPrio( PQ *pq )
{
  pq->count = pq->count - 1;  // lower counter

  return pq->items[ pq->count ];
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

void report( PQ *pq )
{
  // Empty
}
