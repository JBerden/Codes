#include "PQSorted.h"

#include <iostream>
#include <new>

using namespace std;


//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------

PQSorted::PQSorted
 
  ( int      maxItems )

{
  maxItems_ = maxItems;

  items_ = new STDITEM[maxItems_];
  
  count_ = 0;
}


//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------


PQSorted::~PQSorted()

{
}


//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------


void PQSorted::clear()

{
  count_ = 0; 
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------


bool PQSorted::isEmpty()

{
  return count_ == 0;
}


//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------


void PQSorted::put

  ( STDITEM              item )

{
  int i_item;
  int i=0;

  for ( i = 0 ; i < count_ ; i++ )
  {
    if ( item.prio > items_[i].prio )
    {
      break;
    }
  }
  
  // move all items
 
  int iInsert = i;

  for ( i = count_ ; i > iInsert ; i-- )
  {
    items_[i] = items_[i-1];
  }
   
  items_[iInsert] = item;

  count_++;
}


//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------


STDITEM PQSorted::getPrio()

{
  count_--;  // lower counter

  return items_[ count_ ];
}
